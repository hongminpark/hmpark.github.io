---
layout: post
title: "프로그래머스 과제테스트 리뷰"
author: "Hongmin Park"
---

프로그래머스 2019 하반기 웹개발 채용에서 과제를 진행했다.<br> 
과제는 13개월 미만의 지원자를 대상으로 `Spring Boot, Django, Nodejs, Ruby On Rails`로 웹을 구현하는 것이었다. 사실 나는 13개월 이상 근무경험으로 과제대상자는 아니었는데 뒤늦게 과제를 요청했다. 과제 주제는 [캘린더](https://codepen.io/junheee/pen/vYBMrgp)를 구축하는 것이다. [코드펜](https://codepen.io/junheee/pen/vYBMrgp)에 미리 달력이 구현된 프론트엔드 코드를 주셨고, 이를 바탕으로 백엔드는 새로 구축하고 프론트는 수정해서 캘린더를 구축하는 것이었다. <br>
월요일 퇴근 후 바로 요구사항/샘플파일/프론트엔드 코드 등을 찬찬히 보았다. 과제를 진행하면서 프로그래머스에서 여러 모로 굉장히 섬세하게 과제를 만들었다는 것을 매일 매일 느꼈다.
<br><br>
잘 하는 곳은 이렇게 파이프라인을 구성한다는 것을 느낀 것만으로 과제를 참여하길 정말 잘했다는 생각을 하였다. 결론적으로 과제는 기본구현 요구사항의 60%정도밖에 완성하지 못한 것 같다. 추가 요구사항은 애초에 욕심내지 못했고, 기본 요구사항에서는 `Validation`, `Logging` 등 완성도를 높이기 위해 수정해야했던 나머지 자잘 자잘한 부분들이 아쉬웠다. 그리고 제공된 제출 툴을 사용하지 못하고 결국 `GCP`에 1시간만에 디플로이해서 링크로 제출하였다. <br><br>

## Detail Reviews
- 과제 제출을 위해 `github`에 `private`으로 레포를 구성한 후 `collaborator`에 프로그래머스 봇을 추가하면 과제 제출 플랫폼에서 제출 클릭 시 봇이 레포랑 연결되어 소스를 가져온다. 그 후에는 aws에 자동배포되는 플랫폼이 구축되어 있는 듯 했다.
- 각 웹 프레임워크별로 기본 세팅이 되어있는 소스코드를 제공해주었는데, 나는 `Spring Boot`를 선택하였다. 작년에 `Spring, Maven`을 이용한 개발경험만 있었고 `Spring Boot`는 사실 처음이었다. 그리고 샘플 세팅은 빌드 툴로 `Maven`이 아닌 `Gradle`이었는데 샘플 세팅대로 그냥 `Gradle`을 선택하였다. 
- 배포를 위한 DB Migration 툴로 `Flyway`가 샘플 프로젝트 코드 내에 삽입되어 있었다. 사실 DB Migration 툴이라는게 있는지도 처음 알았다. 마지막에 급하게 `GCP`에 구축하느라 `Flyway`를 사용하지는 못했지만 미리 작성해둔 `*.sql`파일에서 바로 테이블 생성/데이터 삽입 작업을 빠르게 끝낼 수 있었다.
- `Spring Boot`에서는 템플릿 엔진으로 `Thymeleaf`를 사용한다. 기존에 `Spring`에서는 `jsp`기반이었는데, 새로운 엔진을 사용하게 되었다. `Thymeleaf`는 기본적으로는 `html`파일에 `<div th:${event}>`와 같이 `th:`라는 템플릿 엔진 코드를 사용해서 앱 실행 시에 객체를 렌더하는 방식이다. 그래서 템플릿 코드에서 문제가 생기면 앱 기동이 안된다. 
- 제출 당일 저녁 10시쯤 처음으로 디플로이 시도를 했다. 아직 수정사항이 많았는데, 혹시나 제출을 못할까봐 한 번 미리 디플로이는 해봐야겠다 싶어서 시도했다. 나는 프로그래머스에서 시키는대로 다 했고 따로 설정을 건드린 부분은 없어서 당연히 성공할 거라고 생각했는데, 웬걸.... 실패했다. `Gradle` 빌드는 성공했고 웹서비스도 실행은 되어 접속은 됬는데 DB부분에서 Table을 못찾는 에러가 떴다. Table을 못찾는다는 것은 Table이 생성되지 않았다는 것인데.. 이 때 부터 삽질이 시작되었다.
- 결론적으로는 Ubuntu Mysql에서는 디폴트로 table이 **'Case Sensitive'**한 것 때문에 에러가 났었다. `GCP`로 배포하지 않았다면 전혀 찾지 못했을 것이다. 10시에 배포시도 후 위 에러를 맞이한 후 1시간정도 여러가지 바꿔보며 시도했는데 에러를 찾지 못했다. 빌드 툴을 직접 사용하는게 아니라서 어느 부분에서 에러가 발생한 것인지 찾을 수가 없을 것 같아 빠르게 클라우드 호스팅을 사용해야겠다고 결정했고, 최근에 사용한 `GCP`에 `GCE`를 생성했다.
- 이걸 1시간만에 할 수 있을까 싶다가도 소스받아오고, db설치/세팅하고, 빌드 후 실행 스텝만 거치면 되니까 할 수는 있겠다 싶었다. ~~(물론 예상치못한 문제를 만나서 제출 못할 수도 있겠다는 우려도 반 정도 하였다.)~~
- 먼저 `git clone`으로 소스를 받아왔다. 그리고 [CentOS7에 Mysql8 설치하기](https://tecadmin.net/install-mysql-8-on-centos/) 가이드를 참고해서 db를 설치했다. 테이블을 생성하고 데이터를 삽입한 후 얼른 빌드를 시도했다. 그래들 명령어도 직접 커맨드에서 친 적은 없어서 긴가민가 하며 여러 명령어를 날려보았다. 소스 경로에서 `./gradlew build`를 날리니 빌드 후 jar를 생성해주었고 `~/build/libs` 경로에 jar파일이 생성되었고, `java -jar ~~.jar`로 Spring Boot 앱을 바로 띄울 수 있었다.
- `GCP`로 결정 후 앱을 띄우기까지는 생각보다 얼마 안걸렸다. 제출까지 30~40분정도는 남았던 것 같았다. 
`GCE`에서 5000포트를 http inbound 포트로 열어준 후 접속을 했는데.. 에러페이지가 떴다. 이럴리가 없는데.. 하고 로그를 보니 아까 프로그래머스에서 디플로이 후와 동일한 테이블을 못찾는 에러가 떴다. 여러방법으로 테이블 재생성을 해보니 대소문자 구별이 원인이었다. 현재 소스에서 DB생성은 `CREATE TABLE Event () ~~~`와 같이 `Event`라는 테이블을 생성하고, CRUD작업을 하는 Sql문에서는 `SELECT * FROM event`와 같이 `event`로 호출하고있었다. 이 소스로 내 로컬(Mac)에서는 동작하였고, 기존에 case insensetive라고 인지하고 있어서 괜찮을 거라고 생각했다. 그런데 `CentOS`에 설치한 mysql에서는 기본으로 **case sensitive**였던 것이다. 뒤늦게라고 에러를 발견했고 이것 저것 수정 후 겨우 과제를 제출할 수 있었다. 
- 추가적인 수정 부분을 반영해서 4~5 차례의 추가 재배포 이후에 11시 50분쯤 과제를 마무리하였다. 녹초가 되어 버스를 타고 집으로 왔다.
<br><br>

## 결론
평가자가 어떻게 평가를 내리든 값진 경험이었다. 물론 남들보다 많이 부족하겠지만, 세상에 이런 툴/방법도 있다는걸 알았고 단시간에 `Spring Boot, Gradle, Thymeleaf`로 웹을 만드는 경험을 했다. 최근에 `java`를 사용할 일이 몇 번 있었는데, `java`공부를 해야겠다고 느꼈다. 엔지니어 영역에서는 개발을 잘 안하다 보니 사실 만들 수는 있지만 언어의 특성을 바르게 이해하고 만들지는 못했다. 이번에 웹을 만들면서 다시 `public, private, static, ...` 등 `java` 공부를 다시 해야겠다고 느꼈다. 

